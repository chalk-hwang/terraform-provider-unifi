---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "unifi_port_profile Resource - terraform-provider-unifi"
subcategory: ""
description: |-
  unifi_port_profile manages a port profile for use on network switches.
---

# unifi_port_profile (Resource)

`unifi_port_profile` manages a port profile for use on network switches.

## Example Usage

```terraform
variable "vlan_id" {
  default = 10
}

resource "unifi_network" "vlan" {
  name    = "wifi-vlan"
  purpose = "corporate"

  subnet       = "10.0.0.1/24"
  vlan_id      = var.vlan_id
  dhcp_start   = "10.0.0.6"
  dhcp_stop    = "10.0.0.254"
  dhcp_enabled = true
}

resource "unifi_port_profile" "poe_disabled" {
  name = "POE Disabled"

  native_networkconf_id = unifi_network.vlan.id
  poe_mode              = "off"
}

resource "unifi_port_profile" "with_included_networks" {
  name                  = "Included Networks Profile"
  native_networkconf_id = unifi_network.vlan.id
  tagged_vlan_mgmt      = "custom"
  included_network_ids  = [unifi_network.vlan20.id, unifi_network.vlan30.id]
  poe_mode              = "auto"
}

resource "unifi_port_profile" "block_all_forward_native" {
  name                  = "Block All Forward Native"
  native_networkconf_id = unifi_network.management.id
  tagged_vlan_mgmt      = "block_all"
  poe_mode              = "auto"
  forward               = "native"
}
```

## Description

`unifi_port_profile` manages a port profile for use on network switches.

New Addition: A complementary schema `included_network_ids` has been introduced alongside the existing `excluded_network_ids`. While `excluded_network_ids` allows users to specify networks that should be excluded from the port profile, `included_network_ids` provides the inverse functionality, enabling users to explicitly include specific networks. This addition enhances flexibility and ease of use by allowing users to choose the most suitable approach for their configuration needs.

### Important Configuration Constraints
- Tagged VLAN Management (`tagged_vlan_mgmt`):
  - To utilize `included_network_ids` or `excluded_network_ids`, the tagged_vlan_mgmt attribute must be set to `"custom"`.
  - If `tagged_vlan_mgmt` is set to `"block_all"`, the `forward` attribute must be explicitly set to `"native"`.

These constraints ensure that the network inclusion/exclusion logic functions correctly and that the port forwarding behavior aligns with the desired configuration.

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `autoneg` (Boolean) Enable link auto negotiation for the port profile. When set to `true` this overrides `speed`. Defaults to `true`.
- `dot1x_ctrl` (String) The type of 802.1X control to use. Can be `auto`, `force_authorized`, `force_unauthorized`, `mac_based` or `multi_host`. Defaults to `force_authorized`.
- `dot1x_idle_timeout` (Number) The timeout, in seconds, to use when using the MAC Based 802.1X control. Can be between 0 and 65535 Defaults to `300`.
- `egress_rate_limit_kbps` (Number) The egress rate limit, in kpbs, for the port profile. Can be between `64` and `9999999`.
- `egress_rate_limit_kbps_enabled` (Boolean) Enable egress rate limiting for the port profile. Defaults to `false`.
- `excluded_network_ids` (Set of String) The IDs of networks to exclude from this port profile.
- `included_network_ids` (Set of String) The IDs of networks to include in this port profile. 
  - This is the inverse of excluded_network_ids and allows for explicitly specifying which networks should be part of the port profile.
- `forward` (String) The type forwarding to use for the port profile. Can be `all`, `native`, `customize` or `disabled`. Defaults to `customize`.
- `full_duplex` (Boolean) Enable full duplex for the port profile. Defaults to `false`.
- `isolation` (Boolean) Enable port isolation for the port profile. Defaults to `false`.
- `lldpmed_enabled` (Boolean) Enable LLDP-MED for the port profile. Defaults to `true`.
- `lldpmed_notify_enabled` (Boolean) Enable LLDP-MED topology change notifications for the port profile.
- `name` (String) The name of the port profile.
- `native_networkconf_id` (String) The ID of network to use as the main network on the port profile.
- `op_mode` (String) The operation mode for the port profile. Can only be `switch` Defaults to `switch`.
- `poe_mode` (String) The POE mode for the port profile. Can be one of `auto`, `passv24`, `passthrough` or `off`.
- `port_security_enabled` (Boolean) Enable port security for the port profile. Defaults to `false`.
- `port_security_mac_address` (Set of String) The MAC addresses associated with the port security for the port profile.
- `priority_queue1_level` (Number) The priority queue 1 level for the port profile. Can be between 0 and 100.
- `priority_queue2_level` (Number) The priority queue 2 level for the port profile. Can be between 0 and 100.
- `priority_queue3_level` (Number) The priority queue 3 level for the port profile. Can be between 0 and 100.
- `priority_queue4_level` (Number) The priority queue 4 level for the port profile. Can be between 0 and 100.
- `site` (String) The name of the site to associate the port profile with.
- `speed` (Number) The link speed to set for the port profile. Can be one of `10`, `100`, `1000`, `2500`, `5000`, `10000`, `20000`, `25000`, `40000`, `50000` or `100000`
- `stormctrl_bcast_enabled` (Boolean) Enable broadcast Storm Control for the port profile. Defaults to `false`.
- `stormctrl_bcast_level` (Number) The broadcast Storm Control level for the port profile. Can be between 0 and 100.
- `stormctrl_bcast_rate` (Number) The broadcast Storm Control rate for the port profile. Can be between 0 and 14880000.
- `stormctrl_mcast_enabled` (Boolean) Enable multicast Storm Control for the port profile. Defaults to `false`.
- `stormctrl_mcast_level` (Number) The multicast Storm Control level for the port profile. Can be between 0 and 100.
- `stormctrl_mcast_rate` (Number) The multicast Storm Control rate for the port profile. Can be between 0 and 14880000.
- `stormctrl_type` (String) The type of Storm Control to use for the port profile. Can be one of `level` or `rate`.
- `stormctrl_ucast_enabled` (Boolean) Enable unknown unicast Storm Control for the port profile. Defaults to `false`.
- `stormctrl_ucast_level` (Number) The unknown unicast Storm Control level for the port profile. Can be between 0 and 100.
- `stormctrl_ucast_rate` (Number) The unknown unicast Storm Control rate for the port profile. Can be between 0 and 14880000.
- `stp_port_mode` (Boolean) Enable spanning tree protocol on the port profile. Defaults to `true`.
- `tagged_networkconf_ids` (Set of String) The IDs of networks to tag traffic with for the port profile.
- `voice_networkconf_id` (String) The ID of network to use as the voice network on the port profile.

### Read-Only

- `id` (String) The ID of the port profile.


## Additional Notes

- Mutual Exclusivity: The `included_network_ids` and `excluded_network_ids` schemas are complementary. It's recommended to use either `included_network_ids` or `excluded_network_ids` based on your configuration needs, but not both simultaneously to avoid potential conflicts.

- Tagged VLAN Management Requirements:
  - Using `included_network_ids` or `excluded_network_ids`: Ensure that `tagged_vlan_mgmt` is set to `"custom"`. This setting allows the port profile to recognize and apply the inclusion or exclusion of specific network IDs.
  - Using `block_all`: When `tagged_vlan_mgmt` is set to `"block_all"`, you must set the `forward` attribute to `"native"`. This configuration blocks all tagged VLAN traffic except for the native VLAN.

- Ease of Use: The introduction of included_network_ids simplifies configurations where specific networks need to be explicitly included, enhancing clarity and maintainability of your Terraform code.

- Backward Compatibility: Existing configurations using excluded_network_ids will continue to function as before, ensuring backward compatibility.

- Validation:
  - Terraform configurations must adhere to the constraints related to tagged_vlan_mgmt. Failure to do so will result in validation errors.
  - Example of invalid configuration:
  ```terraform
  resource "unifi_port_profile" "invalid" {
    name                  = "Invalid Profile"
    native_networkconf_id = unifi_network.management.id
    tagged_vlan_mgmt      = "block_all"
    poe_mode              = "auto"
    // Missing `forward = "native"`
  }
  ```
  This configuration is invalid because forward is not set to "native" when tagged_vlan_mgmt is "block_all".